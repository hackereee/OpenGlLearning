# 我对齐次坐标的一些理解

## 位移
普通的坐标系仿射变换无法做到位移，我们举个实际的例子来说明：

现在桌上有一张透明的纸，假设这张纸可以随意拉伸和旋转，那么它就具有了旋转和缩放的仿射变换性质；我们在上面画了一个兔子，假若我们此时把白纸拿起来，这张纸上的兔子就可以透过光线投影到桌上；好了，有了以上的条件，我们继续想象以下这些场景：若我们此时想放大这个兔子，我们该如何操作？答案很简单，我们只需要将整张纸拉伸（扯）宽/长即可，如果我们想把兔子调个方向，那么我们只需要旋转整张纸即可；那问题来了，如果我想平移整只兔子在这个纸上的位置呢？你会发现我们无论如何操作这张白纸，这个兔子的位置不会改变，它永远在我们落笔画下它的那个位置！在图形学中，这个透明纸就是平面，而白纸上的兔子就是绘制的图形，通过以上的思想实验，我们发现在一个平面上只能做到旋转和缩放两个变换，而对于平移变换是无法做到的。
A
那如何解决这个问题呢？答案就是投影！记得最开始我们说过整张纸抬起来，在其上面打上光源，我们就可以在桌面上得到一支兔子！我们随意移动纸张，桌面上的兔子就可以随意变换位置，这就是平移。
我们将兔子投影到了桌面（平面）上，此时我们就可以轻松的实现旋转、缩放、平移三个变换。

以上就是图形学中实现仿射变换的例子，现在我们将兔子放到一个二维向量空间中，最初它所对应的矩阵是基 $\begin{bmatrix}1&0\\0&1\end{bmatrix}$，此时假设我们的兔子图形的其中一个顶点为$\begin{bmatrix}tx\\ty\end{bmatrix}$,现在我们有矩阵$\begin{bmatrix}x&0\\0&y\end{bmatrix}$,刚刚的顶点向量就会经历如下变换：
$$ \begin{bmatrix}  x&0\\0&y  \end{bmatrix} * \begin{bmatrix} tx\\ty \end{bmatrix}  = \begin{bmatrix}
    tx*x\\ty*y
\end{bmatrix}$$
我们得到了一个缩放或旋转后的新顶点，而对于平移呢？我们试图在这个平面上查找一个矩阵使得顶点$\begin{bmatrix} tx\\ty  \end{bmatrix}$ 平移到 $\begin{bmatrix} tx+x\\ty+y\end{bmatrix}$, 我们可以在当前空间内找到这样的矩阵吗？试想刚刚的例子，这就等于我们要在桌面上移动我们画好的兔子，这显然做不到，此时我们就需要——升维！将原来的二维平面提升一个维度，我们来到了三维空间，我们在原来的空间上增加一个维度w, 我们构造一个矩阵来实现之前的平移变换： 
$$\begin{bmatrix}
    1&0&x\\0&1&y\\0&0&1
    \end{bmatrix} * \begin{bmatrix}
        tx\\ty\\1
    \end{bmatrix} = \begin{bmatrix}
        tx+x\\ty+y\\1
    \end{bmatrix}$$ 
现在我们已经实现了平移变换，这个也就之前例子光源打到纸张上，然后得到兔子的投影，我们只需要移动纸张，则桌面上的投影也就会跟着移动。我们新多出的维度w还有另外的用处，它可以用来表示透视坐标中点的远和近，接下来我们继续探讨三维空间中齐次坐标的作用。

## 透视
透视在生活中无处不在，简单点说就是近大远小，对于3D场景来说，我们必须要处理透视，否则所有事物就不会按近大远小比例显示。
图形学中都是使用齐次坐标除法来表示一个物体的摆放“位置”，比如我们有一个顶点 $\begin{bmatrix}
    x\\y\\z\\w
\end{bmatrix}$ 那么w就表示其在空间当中的具体位置，具体算法就是齐次除法：$\begin{bmatrix}
    x/w\\y/w\\z/w
\end{bmatrix}$。当w为0时则表示改点为平面上的无限远点，也表示当前的表示为一个向量，因为向量只有大小和方向，并不能表示位置，只有具体的某一个点，才能表示位置，当w为0时其点为无限原点，这种点对于我们图形展示来说是没啥意义的，因为你无法在空间中上画出一个无限远的点；我们换个角度理解，当w为0时，向量并没有升维，该向量也就不存在投影的点，所以它就指代其向量本身，而当w不为0时，其就提升了一个维度，所以它就指代当前向量在空间中的投影！

## 总结
齐次坐标在图形学中无处不在，它主要用对图形的平移及透视变换，有了齐次坐标我们几乎可以实现所有图形的仿射变换；它主要原理是通过将原坐标空间提升一个维度，在这个高维坐标系中变换后，将结果投影至原空间中从而实现变换.